var abp=abp||{};(function(n){abp.modals=abp.modals||{};abp.modals.PermissionManagement=function(){function r(t,i){var u=i.closest(".custom-checkbox").attr("data-parent-name");u&&t.find(".custom-checkbox").filter('[data-permission-name="'+u+'"]').find('input[type="checkbox"]').each(function(){var i=n(this);i.prop("checked",!0);r(t,i)})}function u(t,i){var r=i.closest(".custom-checkbox").attr("data-permission-name");r&&t.find(".custom-checkbox").filter('[data-parent-name="'+r+'"]').find('input[type="checkbox"]').each(function(){var i=n(this);i.prop("checked",!1);u(t,i)})}function t(t){var u=0,e,i;t.find('input[type="checkbox"]').not('[name="SelectAllInThisTab"]').each(function(){n(this).is(":checked")===!0&&u++});var f=n("#"+t.attr("id")+"-tab"),o=f.html().replace("<b>","").replace("<\/b>","").replace("<small>","").replace("<\/small>",""),r=o.split(" ");r[r.length-1].startsWith("(")&&r.pop();e=r.join(" ");i=e+" ("+u+")";i=u>0?"<b>"+i+"<\/b>":"<small>"+i+"<\/small>";f.html(i)}function f(t){var i=t.find('input[name="SelectAllInThisTab"]'),r;i.is(":checked")?t.find('input[type="checkbox"]').not('[name="SelectAllInThisTab"]').length>1?n(i).prop("indeterminate",!0):i.prop("checked",!1):i.is(":indeterminate")&&(r=!0,t.find('input[type="checkbox"]').not('[name="SelectAllInThisTab"]').each(function(){n(this).is(":checked")===!0&&(r=!1)}),r&&(n(i).prop("indeterminate",!1),i.prop("checked",!1)))}function e(t){var i=t.find('input[name="SelectAllInThisTab"]'),r=!0;t.find('input[type="checkbox"]').not('[name="SelectAllInThisTab"]').each(function(){n(this).is(":checked")===!1&&(r=!1)});r?(n(i).prop("indeterminate",!1),i.prop("checked",!0)):n(i).prop("indeterminate",!0)}function o(){for(var r=n(".tab-pane"),t=0;t<r.length;t++){var u=n(r[t]),i=u.find('input[name="SelectAllInThisTab"]'),f=!0,e=!0;u.find('input[type="checkbox"]').not('[name="SelectAllInThisTab"]').each(function(){n(this).is(":checked")===!0?e=!1:f=!1});f?n(i).prop("checked",!0):e?n(i).prop("checked",!1):n(i).prop("indeterminate",!0)}}function i(){var t=n("#SelectAllInAllTabs"),i=!1,r=!0,u=!0;if(n('input[name="SelectAllInThisTab"]').each(function(){n(this).is(":checked")===!0?u=!1:r=!1;n(this).is(":indeterminate")===!0&&(i=!0)}),i){n(t).prop("indeterminate",!0);return}n(t).prop("indeterminate",!1);r?n(t).prop("checked",!0):u?n(t).prop("checked",!1):n(t).prop("indeterminate",!0)}this.initDom=function(s){s.find(".tab-pane").each(function(){var o=n(this);t(o);o.find('input[type="checkbox"]').not('[name="SelectAllInThisTab"]').each(function(){var s=n(this);s.change(function(){s.is(":checked")?(r(o,s),e(o)):(u(o,s),f(o));i();t(o)})})});n('input[name="SelectAllInThisTab"]').change(function(){var r=n(this),u=n("#"+r.attr("data-tab-id"));r.is(":checked")?u.find('input[type="checkbox"]').not(":disabled").prop("checked",!0):u.find('input[type="checkbox"]').not(":disabled").prop("checked",!1);n(r).prop("indeterminate",!1);i();t(u)});n('input[name="SelectAllInAllTabs"]').change(function(){var i=n(this);i.is(":checked")?n('.tab-pane input[type="checkbox"]').not(":disabled").prop("checked",!0):n('.tab-pane input[type="checkbox"]').not(":disabled").prop("checked",!1);n(i).prop("indeterminate",!1);s.find(".tab-pane").each(function(){t(n(this))})});n(function(){n(".custom-scroll-content").mCustomScrollbar({theme:"minimal-dark"});n(".custom-scroll-container > .col-4").mCustomScrollbar({theme:"minimal-dark"})});o();i()}}})(jQuery);
(function(n){var t=abp.localization.getResource("AbpIdentity"),i=volo.abp.identity.identityUser,r=new abp.ModalManager(abp.appPath+"Identity/Users/EditModal"),u=new abp.ModalManager(abp.appPath+"Identity/Users/CreateModal"),f=new abp.ModalManager(abp.appPath+"AbpPermissionManagement/PermissionManagementModal");n(function(){var o=n("#IdentityUsersWrapper"),s=o.find("table"),e=s.DataTable(abp.libs.datatables.normalizeConfiguration({order:[[1,"asc"]],processing:!0,serverSide:!0,scrollX:!0,paging:!0,ajax:abp.libs.datatables.createAjax(i.getList),columnDefs:[{rowAction:{items:[{text:t("Edit"),visible:abp.auth.isGranted("AbpIdentity.Users.Update"),action:function(n){r.open({id:n.record.id})}},{text:t("Permissions"),visible:abp.auth.isGranted("AbpIdentity.Users.ManagePermissions"),action:function(n){f.open({providerName:"U",providerKey:n.record.id})}},{text:t("Delete"),visible:abp.auth.isGranted("AbpIdentity.Users.Delete"),confirmMessage:function(n){return t("UserDeletionConfirmationMessage",n.record.userName)},action:function(n){i.delete(n.record.id).then(function(){e.ajax.reload()})}}]}},{data:"userName"},{data:"email"},{data:"phoneNumber"}]}));u.onResult(function(){e.ajax.reload()});r.onResult(function(){e.ajax.reload()});o.find("button[name=CreateUser]").click(function(n){n.preventDefault();u.open()})})})(jQuery);
